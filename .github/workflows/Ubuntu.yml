name: Ubuntu-Tailscale

on:
  workflow_dispatch:

jobs:
  ubuntu-job:
    runs-on: ubuntu-latest
    timeout-minutes: 60

    steps:
      - name: Show system info
        run: |
          echo "Running on:"
          uname -a
          lsb_release -a

      - name: Install Tailscale
        run: |
          curl -fsSL https://tailscale.com/install.sh | sh

      - name: Connect to Tailscale
        run: |
          sudo tailscale up --authkey=${{ secrets.TAILSCALE_AUTH_KEY }}

      - name: Show Tailscale IP
        run: |
          tailscale ip -4

      - name: Keep job alive (short)
        run: |
          echo "Job alive for 10 minutes"
          sleep 600
